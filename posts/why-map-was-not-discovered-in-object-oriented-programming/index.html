<!doctype html>
<html lang="en-us">
    <head>
        <title>Why map was not discovered in Object-Oriented Programming // David Raab</title>
        <link rel="shortcut icon" href="/favicon.ico" />
        <meta charset="utf-8" />
        <meta name="generator" content="Hugo 0.123.1">
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="author" content="David Raab" />
        <meta name="description" content="" />
        <link rel="stylesheet" href="/css/main.min.0fa334c3f2650e7000dfc8e81f59d23191e59e78f62c565a598f4dc557c92abe.css" />
        <script src="/static/code-toggle.js"></script>

        
        <meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Why map was not discovered in Object-Oriented Programming"/>
<meta name="twitter:description" content="When I started Perl programming back around 2003 one thing that Perl had, what most language didn&rsquo;t, was the existence of the map function.
In today world of programming from JavaScript, C#, Java and so on, the concept nowadays is so common that nearly every language has it, and usually every programmers understands and use it.
That was not always the case. I can remember when LINQ was introduced in C# how a lot of people was complaining how from know on C# would be a language that nobody else never can read or understand anymore."/>

        <meta property="og:title" content="Why map was not discovered in Object-Oriented Programming" />
<meta property="og:description" content="When I started Perl programming back around 2003 one thing that Perl had, what most language didn&rsquo;t, was the existence of the map function.
In today world of programming from JavaScript, C#, Java and so on, the concept nowadays is so common that nearly every language has it, and usually every programmers understands and use it.
That was not always the case. I can remember when LINQ was introduced in C# how a lot of people was complaining how from know on C# would be a language that nobody else never can read or understand anymore." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://davidraab.github.io/posts/why-map-was-not-discovered-in-object-oriented-programming/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-06-05T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-06-06T00:00:00+00:00" />



    </head>
    <body>
        <header class="app-header">
            <a href="https://davidraab.github.io/"><img class="app-header-avatar" src="/avatar.jpg" alt="David Raab" /></a>
            <span class="app-header-title">David Raab</span>
            <nav class="app-header-menu">
                    <a class="app-header-menu-item" href="/">Home</a>
                         - 
                    
                    <a class="app-header-menu-item" href="/tags/">Tags</a>
            </nav>
            <p>Writing about programming (Perl, F#) and other stuff.</p>
            <div class="app-header-social">
                
                    <a href="https://github.com/DavidRaab" target="_blank" rel="noreferrer noopener me">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>David Raab Github Profile</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg>
                    </a>
                
                    <a href="https://davidraab.github.io/index.xml" target="_blank" rel="noreferrer noopener me">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-rss">
  <title>Atom Feed</title>
  <path d="M4 11a9 9 0 0 1 9 9"></path><path d="M4 4a16 16 0 0 1 16 16"></path><circle cx="5" cy="19" r="1"></circle>
</svg>
                    </a>
                
            </div>
        </header>
        
<main class="app-container">
    <article class="post">
        <header class="post-header">
            <h1 class ="post-title">Why map was not discovered in Object-Oriented Programming</h1>
            <div class="post-meta">
                <div>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
                    Jun 5, 2024
                </div>
                <div>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
                    8 min read
                </div>
                <div>
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>
</svg>
                            <a class="tag" href="https://davidraab.github.io/tags/design/">Design</a>
                            <a class="tag" href="https://davidraab.github.io/tags/map/">Map</a>
                </div>
            </div>
        </header>
        <div class="post-content">
            <p>When I started Perl programming back around 2003 one thing that Perl had,
what most language didn&rsquo;t, was the existence of the <code>map</code> function.</p>
<p>In today world of programming from JavaScript, C#, Java and so on, the concept
nowadays is so common that nearly every language has it, and usually every programmers
understands and use it.</p>
<p>That was not always the case. I can remember when LINQ was introduced in C# how
a lot of people was complaining how from know on C# would be a language that nobody
else never can read or understand anymore. The same happened in Java when
Java 8 introduced it&rsquo;s Stream API.</p>
<p>Also in the past I got a lot of complaining from other Perl programmers when
I used <code>map</code> instead of just using a <code>for</code> loop. &ldquo;A <code>for</code> loop
is more readable&rdquo;, did those people say.</p>
<p>What they really meant to say was: I don&rsquo;t know the concept of <code>map</code> and because I
never learned and understand it, I think it is not readable.</p>
<p>But anyway, in this article I want you to show something different. Let&rsquo;s assume
Perl hadn&rsquo;t <code>map</code> built-in. Could we implement it ourself and would we do it?</p>
<h1 id="what-map-does">What <code>map</code> does</h1>
<p>Let&rsquo;s say we want to go through an array <code>@nums</code> and just double every number in it.
But we also want to put the doubled number into a new array, usually we would write
code like this.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">@doubles</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="k">my</span> <span class="nv">$x</span> <span class="p">(</span> <span class="nv">@nums</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">push</span> <span class="nv">@doubles</span><span class="p">,</span> <span class="nv">$x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>I guess its not too bad. Let&rsquo;s say we now wanna square each number.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">@squared</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="k">my</span> <span class="nv">$x</span> <span class="p">(</span> <span class="nv">@nums</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">push</span> <span class="nv">@doubles</span><span class="p">,</span> <span class="nv">$x</span> <span class="o">*</span> <span class="nv">$x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Yeah, it is short, but you know what. When you have written like 1000 of such
loops even that becomes too long. You wanna have it shorter. Most of the code
is anyway the same. As Perl supports <a href="https://en.wikipedia.org/wiki/Anonymous_function">Anonymous Functions</a> we could come
up with a very quick implementation. It could look like this.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">mymap</span><span class="p">($f, @array) {</span>
</span></span><span class="line"><span class="cl">    <span class="k">my</span> <span class="nv">@new</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="k">my</span> <span class="nv">$x</span> <span class="p">(</span> <span class="nv">@array</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">local</span> <span class="nv">$_</span> <span class="o">=</span> <span class="nv">$x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">push</span> <span class="nv">@new</span><span class="p">,</span> <span class="nv">$f</span><span class="o">-&gt;</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nv">@new</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>after that we could write the following code.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">@nums</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">..</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">@doubles</span> <span class="o">=</span> <span class="n">mymap</span> <span class="k">sub</span> <span class="p">{</span> <span class="nv">$_</span> <span class="o">*</span> <span class="mi">2</span>  <span class="p">},</span> <span class="nv">@nums</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">@squared</span> <span class="o">=</span> <span class="n">mymap</span> <span class="k">sub</span> <span class="p">{</span> <span class="nv">$_</span> <span class="o">*</span> <span class="nv">$_</span> <span class="p">},</span> <span class="nv">@nums</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>we also could use a <a href="https://perldoc.perl.org/perlsub#Prototypes">Prototype</a> in Perl.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">mymap</span> <span class="p">:prototype(&amp;@) {</span>
</span></span><span class="line"><span class="cl">    <span class="k">my</span> <span class="p">(</span><span class="nv">$f</span><span class="p">,</span> <span class="nv">@array</span><span class="p">)</span> <span class="o">=</span> <span class="nv">@_</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">my</span> <span class="nv">@new</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="k">my</span> <span class="nv">$x</span> <span class="p">(</span> <span class="nv">@array</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">local</span> <span class="nv">$_</span> <span class="o">=</span> <span class="nv">$x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nb">push</span> <span class="nv">@new</span><span class="p">,</span> <span class="nv">$f</span><span class="o">-&gt;</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nv">@new</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>with this prototype we now can write it exactly like the Perl built-in <code>map</code>
function and dismiss the <code>sub</code> keyword.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">@nums</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">..</span> <span class="mi">10</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">@doubles</span> <span class="o">=</span> <span class="n">mymap</span> <span class="p">{</span> <span class="nv">$_</span> <span class="o">*</span> <span class="mi">2</span>  <span class="p">}</span> <span class="nv">@nums</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">@squared</span> <span class="o">=</span> <span class="n">mymap</span> <span class="p">{</span> <span class="nv">$_</span> <span class="o">*</span> <span class="nv">$_</span> <span class="p">}</span> <span class="nv">@nums</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>So would we come up with this kind of abstraction? I guess yes, at least me
I am always happy when I am able to achieve the same with less code. I
like it because the above <code>mymap</code> reduces the code to it&rsquo;s <em>Moving Parts</em>.</p>
<p><em>Moving Parts</em> means that you only need to write the stuff that differs. When
you look at both previous <code>for</code>-loop solutions, you see that most code is actually
the same. When you do a diff on it than only small characters differs. Mainly just
what we did with <code>$x</code>. To create the <code>@doubled</code> array we wrote <code>$x * 2</code> and
in the squared version we wrote <code>$x * $x</code>.</p>
<p>With the <code>mymap</code> function on the other hand we can strip it down to only write
this piece of code. Or to it&rsquo;s core, we just write the <em>Moving Parts</em>. This
overall makes code easier to read and understand as you only need to read
and understand the <em>important parts</em>.</p>
<p>The whole idea of <strong>go through an array, apply some code to it, and put the result
into a new array</strong> now has become an abstraction known as <code>map</code>. Sure, if somebody
don&rsquo;t know what <code>map</code> does he don&rsquo;t understand it. But that doesn&rsquo;t make it
harder to understand. The same would happen if you don&rsquo;t know what a <code>for</code> loop
does and trying to read a <code>for</code>-loop. Or trying to read any foreign language
you don&rsquo;t know of.</p>
<p>So while that abstraction is useful, it doesn&rsquo;t mean we automatically would use
this abstraction. If we would use it or not depends on something different. It
usually depends on the fact if the abstraction leads to writing less/shorter
code.</p>
<p>As <code>mymap</code> turns 4 lines of code into just a single line, usually there is a
reason to use <code>map</code>. This is an important part, maybe the most important.</p>
<p>To understand this, let&rsquo;s see how an Object Oriented solution would look like.</p>
<h1 id="an-object-oriented-map">An Object Oriented map</h1>
<p>So when I make the assumption of an object-oriented solution I just think about
the typical features a &ldquo;pure&rdquo; (whatever that means) OO language like
Java or C# was at the beginning of its creation.</p>
<p>For some reason in those <strong>everything is an object</strong> languages where everything
is an object. Everything is an object, except functions. So you cannot pass
functions as arguments. Funny, heh?</p>
<p>So let&rsquo;s assume Perl hadn&rsquo;t the ability to pass a subroutine and we also couldn&rsquo;t
create a <code>sub { ... }</code> code reference on the fly. No problem, we could come up with
a class. For example I could come up with a <code>Doubled</code> class.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">package</span> <span class="nn">Doubled</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="mf">5.036</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">new</span><span class="p">($class) {</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nb">bless</span><span class="p">(</span><span class="o">[]</span><span class="p">,</span> <span class="nv">$class</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">invoke</span><span class="p">($class, $x) {</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nv">$x</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Here I am creating a class and put my code into the <code>invoke</code> method. By
creating that class I now can do.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$double</span> <span class="o">=</span> <span class="nn">Doubled</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">();</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>The only purpose of the <code>Doubled</code> class is actually that I can create an object
from it. Why? Because then I can pass that object as a value and with that
also pass my <code>invoke</code> method as an argument. In this case that class is completely
obsolete because it would actually never makes sense to create a second object from it.</p>
<p>In a class-based solution <code>mymap</code> would change to something like this.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">mymap</span><span class="p">($f, @array) {</span>
</span></span><span class="line"><span class="cl">    <span class="k">my</span> <span class="nv">@new</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="k">my</span> <span class="nv">$x</span> <span class="p">(</span> <span class="nv">@array</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nb">push</span> <span class="nv">@new</span><span class="p">,</span> <span class="nv">$f</span><span class="o">-&gt;</span><span class="n">invoke</span><span class="p">(</span><span class="nv">$x</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nv">@new</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>mymap</code> itself wouldn&rsquo;t be much of a difference. We just expect any object
that has an <code>invoke</code> method, and call that one.</p>
<p>So would we come up with this kind of abstraction in an object-oriented
language?</p>
<p>Maybe not, because in an object-oriented language this piece of code.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">@squared</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="k">my</span> <span class="nv">$x</span> <span class="p">(</span> <span class="nv">@nums</span> <span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nb">push</span> <span class="nv">@doubles</span><span class="p">,</span> <span class="nv">$x</span> <span class="o">*</span> <span class="nv">$x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>would be a lot more shorter than writing this kind of code.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-perl" data-lang="perl"><span class="line"><span class="cl"><span class="k">package</span> <span class="nn">Squared</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">use</span> <span class="mf">5.036</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">new</span><span class="p">($class) {</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nb">bless</span><span class="p">(</span><span class="o">[]</span><span class="p">,</span> <span class="nv">$class</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">sub</span> <span class="nf">invoke</span><span class="p">($class, $x) {</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nv">$x</span> <span class="o">*</span> <span class="nv">$x</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">package</span> <span class="nn">main</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">$square</span> <span class="o">=</span> <span class="nn">Squared</span><span class="o">-&gt;</span><span class="k">new</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="k">my</span> <span class="nv">@squared</span> <span class="o">=</span> <span class="n">mymap</span> <span class="nv">$square</span><span class="p">,</span> <span class="mi">1</span> <span class="o">..</span> <span class="mi">10</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>why should we ever want to turn 4 lines of code into 10+ lines of code? The
whole purpose of creating a class just so we can pass the code <code>$x * $x</code> as
a value is utterly absurd.</p>
<p>And still, people did this kind of stuff. Because sometimes this
still offers value. Sure it can be really helpful in a lot of cases that you can
pass code as values instead of just data. <em>functional-programmers</em> do this
<em>a lot</em>. I can come up with maybe a dozens of use-cases where this is helpfull.
Doing this kind of thing is named the <a href="https://en.wikipedia.org/wiki/Strategy_pattern">Strategy Pattern</a> in object-oriented
programming. A poor man design-pattern when your language don&rsquo;t support
<a href="https://en.wikipedia.org/wiki/Anonymous_function">lambdas</a>.</p>
<p>A pattern that at least in C# or Java have become obsolete and should never
be used anymore.</p>
<p>Sure in Java or C# you also need to add an interface definition because of its
static-typing, making the solution even more bloated.</p>
<p>And this is why <code>map</code> would basically never exist in an <em>object-oriented</em> language.</p>
<p>The language itself gives you no ability to abstract that 4 lines of for-each loop
into a shorter more readable code. It usually only can make it more complex
with more lines of code, but that is usually not considered as <em>good</em> among
programmers.</p>
<h1 id="a-question">A Question</h1>
<p>Sometimes people think that passing functions and creating them on the fly isn&rsquo;t
object oriented at all.</p>
<p>Well, do you know that whenever you pass an object you basically can think of it
as passing complex data and maybe a hundred of methods as a single object as a single
argument?</p>
<p>So why is passing a single function as an object not object-oriented? Because it is
just a single function? How many methods must an object have to be considered an
<em>object</em>? Two? Three? Twelve?</p>
<p>Isn&rsquo;t passing a single function exactly and the best fullfilment of the object-oriented
<a href="https://en.wikipedia.org/wiki/Single-responsibility_principle">Single Responsibility Principle</a>?</p>
<h1 id="related-posts">Related Posts</h1>
<ul>
<li><a href="https://davidraab.github.io/posts/functions-are-interfaces/">Functions are interfaces</a></li>
<li><a href="https://davidraab.github.io/posts/map-operates-on-functions/">Map operates on functions</a></li>
<li><a href="https://davidraab.github.io/posts/understanding-map/">Understaing map</a></li>
</ul>

        </div>
        <div class="post-footer">
            <div id="disqus_thread"></div>
<script>
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "davidraab" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
    </article>
</main>
<aside> <nav id="TableOfContents">
  <ul>
    <li><a href="#what-map-does">What <code>map</code> does</a></li>
    <li><a href="#an-object-oriented-map">An Object Oriented map</a></li>
    <li><a href="#a-question">A Question</a></li>
    <li><a href="#related-posts">Related Posts</a></li>
  </ul>
</nav> </aside>

    </body>
</html>
